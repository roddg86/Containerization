### Уроки в рамках модуля Контейнеризация

#### Урок 1

Вывод списка используемых приложением библиотек,
зависимостей  
ldd /bin/bash

скопировать библиотеки  
cp /lib/x86_64-linux-gnu/libc.so GB/lib
cp /lib/x86_64-linux-gnu/libc.so.6 GB/lib
cp /lib64/ld-linux-x86-64.so.2 GB/lib64

смена корня  
sudo chroot GB /bin/bash

скомпилировать си приложение в sh  
gcc example1.c -o example1.sh

получить информацию о системе  
uname -a

#### Урок 2

В каких случаях в целом удобно применять LXC?
1. Простота и наследственность: когда у нас уже есть какой-либо готовый
   сервис на выделенном сервере и этот сервис нужно правильно упаковать и
   передать разработчикам, тестировщикам либо в целом - другой команде. Да
   или даже просто - произвести перенос с 1 сервера на другой.
2. LXC очень похож на обычную виртуальную машину с точки зрения настройки,
   но потребляет ресурсов как обычный Docker. Это позволяет довольно легко
   настраивать сервисы LXC, так как они очень похожи на сервисы Linux.

Установка lxc:

```shell
sudo apt-get install lxc debootstrap bridge-utils lxc-templates
```

#### Урок 3

Поиск образов через консоль
>docker pull ubuntu

Посмотреть какие образы скачаны, но не установлены
>docker images

Удалить образ
>docker rmi ubuntu

Удалить все образы через переменную
>docker rmi $(docker images -aq)

Удалить все контейнеры принудительно
>docker rm $(docker ps -a -q) --force

Выводит список запущенных контейнеров
>docker ps

Выводит список остановленных контейнеров
>docker ps -a

Вывести список id всех контейнеров
>docker images -aq

Сделать контейнер доступным извне, публикацию портов
>docker run -–publish 8080:80 nginx

Проверка порта
>curl 127.0.0.1:8080

Дать имя контейнеру
>docker run --name testcontainer ubuntu

Остановить контейнер по id
>docker stop 5a81c4b8502e

Посмотреть занятое место на жестком диске
>docker system df

Очистить занятое место, удалить остановленные контейнеры
>docker system prune -af

Запустить контейнер в фоновом режиме
>docker run -d ubuntu sleep 15

#### Урок 4

Базовые приемы уменьшения размера образа  
- Использовать меньше кол-во слоев  
- Очистка кешей
- Использование легковесных образов

Скомпилировать докерфайл
>docker build -t cowsaytest .

В другой директории
>docker build -t cowsaytest -f ./cowsaytest .

#### Урок 5

Команда позволяет собрать сервисы, описанные в
конфигурационных файлах
>docker-compose build
> 
Запускает наш проект. В данном случае проект
запустится в фоновом режиме, так как в команде присутствует флаг -d
>docker-compose up -d

Запускает любые остановленные ранее сервисы в
соответствии с указанными параметрами
>docker-compose start

Останавливает наш проект и, что немаловажно,
удаляет все сервисы, которые были запущены ранее
>docker-compose down

Эта команда просто останавливает все сервисы,
описанные в конфигурации. Она не удаляет контейнеры, тома, сети и прочие
сущности, описанные в конфигурационном файле
>docker-compose stop

С помощью этой команды можно
посмотреть логи нашего сервиса
>docker-compose logs -f [service name] 

Выводит на экран список всех доступных контейнеров
>docker-compose ps

C ее помощью можно
выполнить команду в сервисе, не заходя при этом в контейнер. Ранее мы
рассматривали подобное на уроке "Введение в Docker"
>docker-compose exec [service name] [command]

Позволяет вывести список образов
>docker-compose images

